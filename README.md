# Strip Video Metadata

Утилита для удаления метаданных из видеофайлов в текущей директории.

## Описание

Скрипт автоматически находит все видеофайлы в текущей директории и удаляет из них метаданные, включая:
- Время создания (`creation_time`)
- Информацию об энкодере
- Данные о производителе
- TimeCode потоки
- Другие персональные и идентифицирующие данные

## Требования

- Go 1.21+
- ffmpeg (установка: `brew install ffmpeg`)

## Установка

1. Установите ffmpeg:
```bash
brew install ffmpeg
```

2. Убедитесь, что Go установлен:
```bash
go version
```

3. Соберите бинарный файл:
```bash
go build -o strip-metadata cmd/strip-metadata/main.go
```

## Использование

Перейдите в директорию с видеофайлами и запустите:

**С использованием бинарного файла:**
```bash
./strip-metadata
```

**Или напрямую через Go:**
```bash
go run cmd/strip-metadata/main.go
```

Скрипт автоматически:
- Найдет все видеофайлы в текущей директории
- Удалит метаданные без перекодирования (быстро, без потери качества)
- Заменит оригинальные файлы обработанными версиями

## Поддерживаемые форматы

- `.mp4`
- `.mkv`
- `.avi`
- `.mov`
- `.wmv`
- `.flv`
- `.webm`
- `.m4v`

## Принцип работы

Скрипт использует ffmpeg с параметрами:
- `-map_metadata -1` - удаляет все метаданные
- `-c copy` - копирует потоки без перекодирования (быстро, без потери качества)
- `-loglevel error` - показывает только ошибки

## Безопасность

- Создаются временные файлы с расширением `.tmp.{ext}`
- Оригинальные файлы заменяются только после успешной обработки
- В случае ошибки временные файлы автоматически удаляются

## Пример вывода

```
2025/11/05 16:19:46 Сканирование директории: /Users/scrypto/dev/cursor/pentest
2025/11/05 16:19:46 Найдено видеофайлов: 8
2025/11/05 16:19:46 [1/8] Обработка: V1-0001_Compound Clip 8_00000000.mp4
2025/11/05 16:19:46 [1/8] Готово: V1-0001_Compound Clip 8_00000000.mp4
...
2025/11/05 16:19:47 Обработка завершена
```

## Примечания

- Файлы обрабатываются в текущей директории и поддиректориях (рекурсивно)
- Скрипт сохраняет технические метаданные контейнера (major_brand, minor_version), необходимые для корректной работы файла
- Обработка происходит без перекодирования, поэтому размер файла остается практически неизменным

