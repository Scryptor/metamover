# Strip Video Metadata

Утилита для удаления метаданных из видеофайлов в текущей директории.

## Описание

Программа автоматически находит все видеофайлы в текущей директории и удаляет из них метаданные, включая:
- Время создания (`creation_time`)
- Информацию об энкодере
- Данные о производителе
- TimeCode потоки
- Другие персональные и идентифицирующие данные

## Быстрый старт

### Скачать готовый бинарный файл

1. Перейдите на страницу [Releases](https://github.com/Scryptor/metamover/releases)
2. Скачайте бинарный файл для вашей платформы
3. Сделайте файл исполняемым:
   ```bash
   chmod +x strip-metadata
   ```
4. Перейдите в директорию с видеофайлами и запустите:
   ```bash
   ./strip-metadata
   ```

### Использование

Перейдите в директорию с видеофайлами и запустите:

```bash
./strip-metadata
```

Программа автоматически:
- Найдет все видеофайлы в текущей директории и поддиректориях
- Удалит метаданные без перекодирования (быстро, без потери качества)
- Заменит оригинальные файлы обработанными версиями
- Автоматически установит `ffmpeg` при необходимости (если доступен Homebrew)

## Поддерживаемые форматы

- `.mp4`
- `.mkv`
- `.avi`
- `.mov`
- `.wmv`
- `.flv`
- `.webm`
- `.m4v`

## Пример вывода

```
2025/11/05 16:19:46 Сканирование директории: /Users/scrypto/dev/cursor/pentest
2025/11/05 16:19:46 Найдено видеофайлов: 8
2025/11/05 16:19:46 [1/8] Обработка: V1-0001_Compound Clip 8_00000000.mp4
2025/11/05 16:19:46 [1/8] Готово: V1-0001_Compound Clip 8_00000000.mp4
...
2025/11/05 16:19:47 Обработка завершена
```

## Принцип работы

Программа использует ffmpeg с параметрами:
- `-map_metadata -1` - удаляет все метаданные
- `-c copy` - копирует потоки без перекодирования (быстро, без потери качества)
- `-loglevel error` - показывает только ошибки

## Безопасность

- Создаются временные файлы с расширением `.tmp.{ext}`
- Оригинальные файлы заменяются только после успешной обработки
- В случае ошибки временные файлы автоматически удаляются

## Примечания

- Файлы обрабатываются в текущей директории и поддиректориях (рекурсивно)
- Программа сохраняет технические метаданные контейнера (major_brand, minor_version), необходимые для корректной работы файла
- Обработка происходит без перекодирования, поэтому размер файла остается практически неизменным
- Программа автоматически проверит наличие `ffmpeg` при запуске. Если `ffmpeg` не найден, но доступен Homebrew, программа попытается установить его автоматически. Если Homebrew недоступен, вы получите инструкции по ручной установке.

---

## Установка из исходников

Если вы хотите собрать программу из исходников:

### Требования

- Go 1.21+
- ffmpeg (будет установлен автоматически при необходимости, если доступен Homebrew)

### Сборка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/Scryptor/metamover.git
   cd metamover
   ```

2. Соберите бинарный файл:
   ```bash
   go build -o strip-metadata cmd/strip-metadata/main.go
   ```

3. Запустите:
   ```bash
   ./strip-metadata
   ```

### Запуск без сборки

Можно запустить напрямую через Go:

```bash
go run cmd/strip-metadata/main.go
```
